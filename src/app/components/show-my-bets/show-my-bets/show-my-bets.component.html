<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bet Manager</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-4">
    <div class="container mx-auto">
        <h1 class="text-2xl font-bold mb-4">Gerenciador de Apostas</h1>

        <!-- Filtros -->
        <div class="flex space-x-4 mb-8">
          <div>
            <label for="competition" class="block text-sm font-medium text-gray-700">Campeonato</label>
            <select [(ngModel)]="competitionFilter" id="competition" name="competition" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
              <option value="">Selecione</option>
              <option value="Paulistão">Paulistão</option>
              <option value="Brasileirão">Brasileirão</option>
              <!-- Adicione mais opções conforme necessário -->
            </select>
          </div>

          <div>
            <label for="result" class="block text-sm font-medium text-gray-700">Resultado</label>
            <select [(ngModel)]="resultFilter" id="result" name="result" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
              <option value="">Selecione</option>
              <option value=true>Green</option>
              <option value=false>Red</option>
            </select>
          </div>

          <div>
            <label for="dateRange" class="block text-sm font-medium text-gray-700">Período</label>
            <input type="date" [(ngModel)]="dateStart" id="dateStart" name="dateStart" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
            <input type="date" [(ngModel)]="dateEnd" id="dateEnd" name="dateEnd" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>

          <div class="self-end">
            <button (click)="searchBets()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              Pesquisar
            </button>
          </div>
        </div>

        <!-- Cards de Apostas -->
        <div id="bets" class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
          <div *ngFor="let bet of bets" class="bg-white shadow-md rounded-lg p-4">
              <h2 class="text-lg font-bold mb-2">Aposta #{{ bet.id || 'N/A' }}</h2>

              <!-- Safe Navigation and Conditional Rendering -->
              <p class="mb-2"><strong>Times:</strong>
                  {{ bet.game?.teams?.length ? bet.game.teams.join(' vs ') : 'N/A' }}
              </p>
              <p class="mb-2"><strong>Campeonato:</strong>
                  {{ bet.game?.competition || 'N/A' }}
              </p>

              <p class="mb-2"><strong>Valor:</strong> R$ {{ bet.value || 0 }}</p>
              <p class="mb-2"><strong>Odd:</strong> {{ bet.odd || 0 }}</p>
              <p class="mb-2"><strong>Estilo de Aposta:</strong> {{ bet.betStyle || 'N/A' }}</p>
              <p class="mb-2"><strong>Resultado:</strong>
                  <span [ngClass]="bet.green ? 'text-green-600' : 'text-red-600'">
                      {{ bet.green ? 'Green' : 'Red' }}
                  </span>
              </p>

              <!-- Safe check for Entrances -->
              <p class="mb-2"><strong>Entradas:</strong>
                  {{ getEntrancesDescriptions(bet) || 'N/A' }}
              </p>
          </div>
      </div>

        <button (click)="navigateToHomePage()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
          Voltar
        </button>
    </div>


  <script>
    // Aqui você pode adicionar o código JavaScript para buscar os dados da API e renderizar os cards dinamicamente
  </script>
</body>
</html>
